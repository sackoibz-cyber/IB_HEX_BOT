<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>IB-HEX-BOT - Générateur de Session</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
    body {
        margin: 0;
        font-family: 'Inter', sans-serif;
        background: url('https://i.ibb.co/vvLVkvkR/IMG-20260118-WA0276.jpg') no-repeat center center fixed;
        background-size: cover;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        color: #fff;
    }
    .container {
        background: rgba(0,0,0,0.6);
        border-radius: 15px;
        padding: 30px 40px;
        text-align: center;
        width: 320px;
        box-shadow: 0 0 20px rgba(0,0,0,0.5);
    }
    .container img {
        width: 80px;
        margin-bottom: 15px;
    }
    h1 {
        font-size: 22px;
        margin-bottom: 20px;
    }
    button {
        width: 100%;
        padding: 12px;
        margin: 8px 0;
        border: none;
        border-radius: 10px;
        font-size: 16px;
        cursor: pointer;
        background: linear-gradient(90deg,#7b5cff,#5e00ff);
        color: #fff;
        transition: 0.3s;
    }
    button:hover {
        opacity: 0.85;
    }
    #qrImage {
        margin: 15px 0;
        width: 200px;
        height: 200px;
        object-fit: contain;
        border: 2px solid #fff;
        border-radius: 10px;
    }
</style>
</head>
<body>
<div class="container">
    <img src="https://i.ibb.co/vvLVkvkR/IMG-20260118-WA0276.jpg" alt="Logo Bot">
    <h1>IB-HEX-BOT - Générateur de Session</h1>
    <button id="pairBtn">Pair Code</button>
    <button id="qrBtn">QR Code</button>
    <button id="pluginBtn">Plugin</button>
    <button id="githubBtn">GitHub</button>
    <button id="waSupportBtn">WhatsApp Support</button>

    <img id="qrImage" src="" alt="QR Code">
    <p id="pairText" style="margin-top:10px; font-weight:600;"></p>
</div>

<script>
const qrBtn = document.getElementById('qrBtn');
const pairBtn = document.getElementById('pairBtn');
const pluginBtn = document.getElementById('pluginBtn');
const githubBtn = document.getElementById('githubBtn');
const waSupportBtn = document.getElementById('waSupportBtn');
const qrImage = document.getElementById('qrImage');
const pairText = document.getElementById('pairText');

const GITHUB_LINK = "https://github.com/sackoibz-cyber/IB_HEX_BOT"; // ton dépôt
const WA_SUPPORT_LINK = "https://wa.me/TON_NUMERO"; // à remplacer par ton lien WhatsApp

// Afficher QR initial
async function fetchQR() {
    const res = await fetch('/qr');
    const data = await res.json();
    qrImage.src = data.qr || '';
    pairText.innerText = data.pairCode ? `Pair Code : ${data.pairCode}` : '';
}

// Bouton QR Code
qrBtn.addEventListener('click', async () => {
    await fetch('/regenerate-qr'); // à créer dans index.js
    fetchQR();
});

// Bouton Pair Code
pairBtn.addEventListener('click', async () => {
    const phone = prompt("Entrez votre numéro de téléphone (avec indicatif) :");
    if (!phone) return;
    const res = await fetch('/regenerate-pair', {
        method: 'POST',
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ phone })
    });
    const data = await res.json();
    pairText.innerText = `Pair Code : ${data.pairCode}`;
    alert("Session régénérée pour le numéro " + phone);
});

// Bouton Plugin
pluginBtn.addEventListener('click', () => {
    alert("Plugin activé !");
});

// Bouton GitHub
githubBtn.addEventListener('click', () => window.open(GITHUB_LINK, "_blank"));

// Bouton WhatsApp Support
waSupportBtn.addEventListener('click', () => window.open(WA_SUPPORT_LINK, "_blank"));

// Actualiser le QR toutes les 5s
setInterval(fetchQR, 5000);
fetchQR();
</script>
</body>
</html>
